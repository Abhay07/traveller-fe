(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(81)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},58:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),i=a.n(l),s=(a(44),a(9)),o=a(10),u=a(12),c=a(11),d=a(13),p=(a(45),a(46),a(14));var h=function(){return r.a.createElement("nav",null,r.a.createElement("ul",{className:"navbar"},r.a.createElement("li",null,r.a.createElement(p.b,{to:"/traveller-fe/"},"Add Traveller")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/traveller-fe/list/"},"Traveller list"))))},m=a(16),b=a(5),v=(a(58),"SET_ALERT_MSG"),f="SET_ALERT_VISIBILITY",E={travellerEndpoint:"https://api.abhaysrivastav.net/traveller/api/v1/travellers"},g=function(e){return{type:"SET_USER",payload:e}},y=function(e,t){return{type:v,payload:{msg:e,isInfoAlert:t}}},j=a(22),O=a.n(j);var S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={name:"",email:"",dob:null,phone:"",btnDisable:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleInput",value:function(e,t){this.setState(Object(m.a)({},e,t))}},{key:"removeError",value:function(){this.setState({error:""})}},{key:"submitDetails",value:function(){var e=this;if(!this.state.btnDisable){var t=this.props,a=t.setAlertMsg;t.toggleAlert;if(this.state.name.match(/^[\w]{3,}[\w\s]*$/))if(this.state.email.match(/^[^@\s]+@[^@\s]+\.[^@\s]+$/))if(this.state.phone.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\.\/0-9]*$/))if(!this.state.dob||new Date(this.state.dob.toString()).getTime()>(new Date).getTime())this.setState({error:"Invalid Birth date"});else{var n=this.state,r={name:n.name,email:n.email,phone:n.phone,dob:n.dob};this.setState({btnDisable:!0}),function(e){return O.a.post(E.travellerEndpoint,e)}(r).then(function(){a("Traveller added successfully",!0)}).catch(function(e){a(e.errorMessage||"Something Went Wrong")}).finally(function(){e.setState({btnDisable:!1})})}else this.setState({error:"Invalid Phone Number"});else this.setState({error:"Invalid Email"});else this.setState({error:"Invalid Name"})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.btnDisable,n=t.error;return r.a.createElement("div",{className:"formContainer"},r.a.createElement("h2",{className:"addTravellerHeading"}," Add Traveller "),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Name",onFocus:this.removeError.bind(this),onChange:function(t){return e.handleInput.bind(e)("name",t.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Email",onChange:function(t){return e.handleInput.bind(e)("email",t.target.value)},onFocus:this.removeError.bind(this)})),r.a.createElement("div",null,r.a.createElement("input",{type:"date",placeholder:"Date of Birth",onFocus:this.removeError.bind(this),onChange:function(t){return e.handleInput.bind(e)("dob",t.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Phone Number",onFocus:this.removeError.bind(this),onChange:function(t){return e.handleInput.bind(e)("phone",t.target.value)}})),r.a.createElement("button",{onClick:this.submitDetails.bind(this),className:a?"disable editBtn":"editBtn"},a?"Submitting":"Submit"),r.a.createElement("div",{className:"errorTxt"},n))}}]),t}(r.a.Component),I={setAlertMsg:y},T=Object(b.b)(null,I)(S),C=(a(78),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setUserList,a=e.setAlertMsg;(function(e){var t=E.travellerEndpoint;return e&&(t+="/".concat(e)),O.a.get(t)})().then(function(e){t(e.data)}).catch(function(e){a(e.errorMessage||"Couldn't fetch travellers list")})}},{key:"deleteTraveller",value:function(e,t){e.preventDefault(),e.stopPropagation();var a=this.props,n=a.setAlertMsg,r=a.usersList,l=a.setUserList;(function(e){return O.a.delete("".concat(E.travellerEndpoint,"/").concat(e))})(t).then(function(e){n("Traveller Deleted successfully",!0);var a=r.filter(function(e){return e._id!==t});l(a)}).catch(function(e){n("Couldn't delete Traveller")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.usersList,n=t.setCurrentUser;return console.log(a),r.a.createElement("div",null,r.a.createElement("h1",{className:"addTravellerHeading"},"Traveller List Page"),a&&a.map(function(t){return r.a.createElement("div",null,r.a.createElement(p.b,{to:"/traveller-fe/detail/"+t._id,onClick:function(e){return n(t)},className:"userDetails"},r.a.createElement("span",null,t.name),r.a.createElement("span",null,r.a.createElement("span",{className:"editBtn",onClick:function(a){return e.deleteTraveller.bind(e)(a,t._id)}},"Delete"))))}),0==a.length&&r.a.createElement("div",{className:"userDetails"},"No Traveller found"))}}]),t}(r.a.Component)),D={setUserList:function(e){return{type:"SET_USER_LIST",payload:e}},setCurrentUser:g,setAlertMsg:y},k=Object(b.b)(function(e){return{usersList:e.usersList.list}},D)(C),A=a(6),N=a(19),M=(a(79),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={editable:{name:!1,dob:!1,phone:!1,email:!1},user:null},a.setEditable=a.setEditable.bind(Object(N.a)(a)),a.handleInput=a.handleInput.bind(Object(N.a)(a)),a.updateUserDetails=a.updateUserDetails.bind(Object(N.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"setEditable",value:function(e){this.setState({editable:Object(A.a)({},this.state.editable,Object(m.a)({},e,!0))})}},{key:"handleInput",value:function(e,t){this.setState({user:Object(A.a)({},this.state.user,Object(m.a)({},e,t))})}},{key:"updateUserDetails",value:function(){var e=this,t=this.state.user;if(t){var a=this.props,n=a.setAlertMsg,r=a.user,l=a.setCurrentUser,i=Object.assign({},t);(function(e,t){return O.a.put("".concat(E.travellerEndpoint,"/").concat(e),t)})(r._id,i).then(function(a){n("Traveller details updated successfully",!0),e.setState({editable:{name:!1,dob:!1,phone:!1,email:!1}}),l(Object(A.a)({},r,t))}).catch(function(e){n(e.errorMessage||"Couldn't update details")})}}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.state.editable,n=t&&t.dob&&new Date(t.dob.toString()).toLocaleDateString();return t&&r.a.createElement("div",null,r.a.createElement("h1",{className:"addTravellerHeading"},"Traveller Detail Page"),r.a.createElement("div",{className:"userDetails"},r.a.createElement("span",{onClick:function(t){return e.setEditable("name")}},!a.name&&t.name,a.name&&r.a.createElement("input",{type:"text",placeholder:"Name",onBlur:function(t){return e.handleInput("name",t.target.value)}})),r.a.createElement("span",{onClick:function(t){return e.setEditable("email")}},!a.email&&t.email,a.email&&r.a.createElement("input",{type:"text",placeholder:"Email",onBlur:function(t){return e.handleInput("email",t.target.value)}})),r.a.createElement("span",{onClick:function(t){return e.setEditable("date")}},!a.date&&n,a.date&&r.a.createElement("input",{type:"date",placeholder:"Date of birth",onChange:function(t){return e.handleInput("dob",t.target.value)}})),r.a.createElement("span",{onClick:function(t){return e.setEditable("phone")}},!a.phone&&t.phone,a.phone&&r.a.createElement("input",{type:"text",placeholder:"Phone number",onBlur:function(t){return e.handleInput("phone",t.target.value)}})),r.a.createElement("span",null,r.a.createElement("button",{className:"editBtn",onClick:this.updateUserDetails},"Save"))))}}]),t}(r.a.Component)),L={setCurrentUser:g,setAlertMsg:y},U=Object(b.b)(function(e){return{user:e.user.user}},L)(M),w=(a(80),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){console.log("test"),e.props.toggleAlert()},1e3)}},{key:"render",value:function(){var e=this.props.alert,t=e.alertMsg,a=e.isInfoAlert;return console.log("alert"),console.log(t,a),r.a.createElement("span",{className:a?"alert info":"alert"},t)}}]),t}(r.a.Component)),_={toggleAlert:function(e){return{type:f,payload:null}}},B=Object(b.b)(function(e){return{alert:e.alert}},_)(w),x=a(15),V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.alert;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(h,null),e.alertVisibility&&r.a.createElement(B,null),r.a.createElement(x.a,{path:"/traveller-fe/",exact:!0,component:T}),r.a.createElement(x.a,{path:"/traveller-fe/list/",component:k}),r.a.createElement(x.a,{path:"/traveller-fe/detail/",component:U})))}}]),t}(r.a.Component),P=Object(b.b)(function(e){return console.log(e),{alert:e.alert}},null)(V),R=a(18);var F=Object(R.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(A.a)({},e,{user:t.payload});default:return e}},usersList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_LIST":return Object(A.a)({},e,{list:t.payload});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return console.log(Object(A.a)({},e,{alertMsg:t.payload.msg,isInfoAlert:Boolean(t.payload.isInfoAlert),alertVisibility:!0})),Object(A.a)({},e,{alertMsg:t.payload.msg,isInfoAlert:Boolean(t.payload.isInfoAlert),alertVisibility:!0});case f:var a=e.alertVisibility;return Object(A.a)({},e,{alertVisibility:!a});default:return e}}}),H=Object(R.c)(F,{user:{user:null},usersList:{list:[]},alert:{alertVisibility:!1,alertMsg:"",isInfoAlert:!1}});i.a.render(r.a.createElement(b.a,{store:H},r.a.createElement(P,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.af1e5881.chunk.js.map